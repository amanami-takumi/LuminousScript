# LuminasScript - 設計仕様書

## 📋 概要
CSVファイルから、ビジュアルノベル形式のウェブアドベンチャーゲーム（ADVゲーム）を自動生成するツールです。
クリックでテキストを進めていく形式のゲームを、プログラミング知識なしで作成できます。
Scriptの本体はPythonで構築されます。

## 🎯 プロジェクト名
**LuminasScript（ルミナススクリプト）**

---

## ✨ 主要機能

### コア機能
- **ワンファイル出力**: CSVから、HTML/CSS/JavaScriptを含む単一のHTMLファイルを生成
- **リッチな演出**: セリフ、選択肢、立ち絵（3ポジション）、背景画像の指定が可能
- **セーブ/ロード機能**: ブラウザのlocalStorageを使用した自動セーブ機能を標準搭載
- **完全なUI**: タイトル画面、メニュー、設定画面を含む完成されたゲームシステム

### ユーザーインターフェース
- **タイトルメニュー**
  - ニューゲーム
  - ロード
  - 設定（テキスト速度、音量調整など）
  - クレジット
- **ゲーム中メニュー**
  - セーブ
  - ロード
  - タイトルに戻る
  - 設定

### ディレクトリ構成
```
project/
├── input/           # 入力ファイル格納ディレクトリ
│   ├── scenario.csv # シナリオデータ
│   └── assets/      # 画像・音声ファイル
│       ├── backgrounds/
│       ├── characters/
│       ├── bgm/
│       └── se/
└── output/          # 生成されたHTMLファイルの出力先
    └── game.html
```

---

## 📊 CSV仕様

### カラム定義

| カラム名                         | 必須 | 説明                             | 実装状況   |
| -------------------------------- | ---- | -------------------------------- | ---------- |
| `scene_id`                       | ✓    | シーン識別子（詳細は後述）       | ✓ 実装済   |
| `person_name`                    |      | 発話者の名前                     | ✓ 実装済   |
| `text`                           |      | 表示テキスト（改行対応）         | ✓ 実装済   |
| `background_image`               |      | 背景画像のファイル名             | ✓ 実装済   |
| `center_standing_portrait_image` |      | 中央の立ち絵                     | ✓ 実装済   |
| `left_standing_portrait_image`   |      | 左側の立ち絵                     | ✓ 実装済   |
| `right_standing_portrait_image`  |      | 右側の立ち絵                     | ✓ 実装済   |
| `effect`                         |      | 画面エフェクト（振動、回転など） | 🔜 将来実装 |
| `sounds`                         |      | 効果音のファイル名               | 🔜 将来実装 |
| `bgm`                            |      | BGMのファイル名                  | 🔜 将来実装 |

### scene_id の命名規則

`scene_id` はハイフン（`-`）で区切られた階層構造を持ちます。

**基本構造**: `[章番号]-[演出記号/シーン番号]-[サブシーン番号]`

#### 演出記号一覧

| 記号               | 意味         | 例      | 説明                      |
| ------------------ | ------------ | ------- | ------------------------- |
| `T`                | タイトル表示 | `1-T`   | 第1章のタイトル画面       |
| `Q`                | 選択肢       | `1-Q`   | 第1章の選択肢シーン       |
| `A`, `B`, `C`, `D` | 分岐ルート   | `1-A-1` | 第1章、ルートAの第1シーン |
| `E`                | エンディング | `1-E`   | 第1章のエンディング演出   |
| 数字               | 通常シーン   | `1-1`   | 第1章の第1シーン          |



### text カラムの特殊ルール

- **改行**: CSVセル内の改行はそのまま表示に反映されます
- **4行以上**: テキストが4行を超える場合、4行目以降は無視されます
- **scene_id が `T` の場合**: textカラムは無視されます（タイトル画面のため）
- **scene_id が `Q` の場合**: textカラムは選択肢のテキストとして扱われます

---

## 🏗️ 技術仕様

### 出力形式
- **ファイル形式**: 単一のHTMLファイル（スタンドアロン）
- **埋め込み**: CSS、JavaScriptはすべてインライン化
- **画像**: Base64エンコードで埋め込み、または相対パス参照

### 使用技術
- **HTML5**: セマンティックなマークアップ
- **CSS3**: アニメーション、トランジション、レスポンシブデザイン
- **Vanilla JavaScript**: フレームワーク不要、軽量な実装

### ブラウザ対応
- Chrome（最新版）
- Firefox（最新版）
- Safari（最新版）
- Edge（最新版）

---

## 🚀 将来の拡張機能

### 優先度: 高
- [ ] 効果音（SE）の再生機能
- [ ] BGMの再生・ループ機能
- [ ] 画面エフェクト（フェード、振動、回転など）
- [ ] オートモード（自動テキスト送り）

### 優先度: 中
- [ ] テキストのタイプライター効果
- [ ] キャラクター表情差分の対応
- [ ] 複数セーブスロット
- [ ] バックログ機能

### 優先度: 低
- [ ] スキップ機能（既読テキストの高速送り）
- [ ] ギャラリーモード
- [ ] 実績システム
- [ ] 多言語対応

---

## 📄 ライセンス・クレジット
Apache2.0
